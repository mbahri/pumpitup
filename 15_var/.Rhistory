setwd("~/Documents/DrivenData/water")
source('~/Documents/DrivenData/water/load.R', echo=TRUE)
library(ranger)
rf <- ranger(status_group ~ ., data=full_train, num.trees = 1500, mtry = 20)
train = full_train[1:53460, ]
test = full_train[53461:59400, ]
rf <- ranger(status_group ~ ., data=train, num.trees = 1500, mtry = 20)
out <- predict(rf, test[,-24])
ranger::predictions(test[,-24])
ranger::predictions(rf)
print(rf)
rf <- ranger(status_group ~ ., data=train, num.trees = 1500, mtry = 3, write.forest = TRUE)
print(rf)
out <- predict(rf, test[,-24])
sum(out == test$status_group)
out
ranger::predictions(out)
sum(ranger::predictions(out) == test$status_group)
sum(ranger::predictions(out) == test$status_group)/5940
rf <- ranger(status_group ~ ., data=train, num.trees = 1500, mtry = 20, write.forest = TRUE)
out <- predict(rf, test[,-24])
sum(ranger::predictions(out) == test$status_group)/5940
rf <- ranger(status_group ~ ., data=train, num.trees = 1500, mtry = 10, write.forest = TRUE)
out <- predict(rf, test[,-24])
sum(ranger::predictions(out) == test$status_group)/5940
rf <- ranger(status_group ~ ., data=full_train, num.trees = 1500, mtry = 10, write.forest = TRUE)
print(rf)
source('~/Documents/DrivenData/water/load_on_test/load_and_clean_t.R', echo=TRUE)
source('~/Documents/DrivenData/water/load_on_test/imputation_t.R', echo=TRUE)
source('~/Documents/DrivenData/water/load_on_test/typing_t.R', echo=TRUE)
source('~/Documents/DrivenData/water/load_on_test/makesub.R', echo=TRUE)
source('~/Documents/DrivenData/water/load_on_test/makesub.R', echo=TRUE)
setwd("~/Documents/DrivenData/water/load_on_test")
source('~/Documents/DrivenData/water/load_on_test/makesub.R', echo=TRUE)
setwd("~/Documents/DrivenData/water/15_var")
source('~/Documents/DrivenData/water/15_var/load.R', echo=TRUE)
source('~/Documents/DrivenData/water/15_var/load.R', echo=TRUE)
train = full_train[1:53460, ]
test = full_train[53461:59400, ]
rf <- ranger(status_group ~ ., data=train, num.trees = 1500)
print(rf)
rf <- ranger(status_group ~ ., data=train, num.trees = 1500, mtry = 10)
print(rf)
rf <- ranger(status_group ~ ., data=train, num.trees = 1500, mtry = 2)
print(rf)
setwd("~/Documents/DrivenData/water/15_var")
source('~/Documents/DrivenData/water/15_var/load.R', echo=TRUE)
source('~/Documents/DrivenData/water/15_var/rf_cv.R', echo=TRUE)
source('~/Documents/DrivenData/water/15_var/rf_cv.R', echo=TRUE)
source('~/Documents/DrivenData/water/15_var/rf_cv.R', echo=TRUE)
control <- trainControl(method="cv", number=5, search="grid")
tunegrid <- expand.grid(mtry=c(13:15))
ntree <- 1500
print(paste("CV for ", ntree, " trees"))
set.seed(1)
rf_gridsearch_1 <- train(status_group~., data=train, method="ranger", tuneGrid=tunegrid, trControl=control, num.trees=ntree, verbose=TRUE)
print(rf_gridsearch_1)
plot(rf_gridsearch_1)
out <- predict(rf_gridsearch_1, test[,-15])
sum(out == test$status_group)
sum(out == test$status_group)/5940
print(rf_gridsearch_1)
